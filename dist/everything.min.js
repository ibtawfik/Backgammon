!function(){"use strict";angular.module("myApp",["ngTouch","ui.bootstrap"]).factory("backGammonLogicService",function(){function a(){return[["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","B","B","B","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","B","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","W","W","","","","","","","","","",""],["B","B","B","B","B","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","W","W","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""]]}function b(b){if(void 0===b.stateBeforeMove.board)return!0;var d=a();if(angular.equals(b.stateBeforeMove.board,d)&&void 0===b.toDelta)return!0;if(angular.equals(b.stateAfterMove.board,d))return!0;var e,f,g=b.stateBeforeMove.board,i=b.stateAfterMove.fromDelta.fromDelta,j=b.stateAfterMove.toDelta.toDelta,r=[b.stateBeforeMove.dice1,b.stateBeforeMove.dice2],s=b.turnIndexBeforeMove,t=k(r);if(r[0]!=r[1]&&(i.length>2||j.length>2)||i.length>4||j.length>4)return console.log(75),!1;if((null===g||void 0===g||""===g||g===[[]])&&(g=a()),0===s)e="W",f="B";else{if(1!==s)return console.log(91),!1;e="B",f="W"}for(var u=0;u<j.length;u++)if(1===j[u]||26===j[u])return console.log(97),!1;if(!m(i,j,t)){var v=t;if(v=[],angular.copy(t,v),v=n(i,j,v),p(g,v,e))return console.log(129),!1}if(c(e,g)){for(var w=h(e),x=0,u=0;15>u;u++)g[w][u]===e&&(x+=1);for(var y=0,u=0;u<i.length;u++)i[u]===w&&(y+=1);if(x>y&&i.length>y)return console.log(164),!1}for(var u=0;u<j.length;u++){if("W"===e&&27===j[u]&&!q(g,e))return console.log(159),!1;if("B"===e&&0===j[u]&&!q(g,e))return console.log(166),!1}for(var u=0;u<j.length;u++)if(l(g,j[u])===f)return console.log(175),!1;for(var z=0,u=0;u<i.length;u++)""!==i[u]&&z++;if(2===t.length&&1===z){if("W"===e&&"B"===l(g,i[0]+t[0])&&"B"===l(g,i[0]+t[1]))return console.log(193),!1;if("B"===e&&"W"===l(g,i[0]-t[0])&&"W"===l(g,i[0]-t[1]))return console.log(201),!1}else if(4===t.length)for(var u=0;z>=u;u++)if("W"===e){for(var A=i[u];A<=j[u];A+=t[0])if("B"===l(g,A))return console.log(212),!1}else for(var A=i[u];A>=j[u];A-=t[0])if("W"===l(g,A))return console.log(219),!1;for(var v=t,u=0;u<i.length;u++)""!==i[u]&&0!==j[u]&&27!==j[u]&&(v=o(i[u],j[u],v));for(var u=0;u<i.length;u++)if(0===j[u]||27===j[u]){var B=Math.abs(i[u]-j[u]);v.sort(function(a,b){return b-a});for(var C=0,A=v.length;A>=0;A--)if(C+v[A]>=B){v.splice(A,v.length-(A+1)),C=0;break}}return!0}function c(a,b){var c;c="W"===a?1:26;for(var d=0;15>d;d++)if(b[c][d]===a)return!0;return!1}function d(b,c,d,g,h){var i=[];angular.copy(h,i),i=k(i);var j,o;if((null===c||void 0===c||""===c||c===[[]])&&(c=a()),0===b)j="W",o="B";else{if(1!==b)throw new Error(t.NO_PLAYER);j="B",o="W"}for(var r=0;r<g.length;r++)if(1===g[r]||26===g[r])throw new Error(t.ILLEGAL_DELTA);if(!m(d,g,i)){var s=i;s=[],angular.copy(i,s),s=n(d,g,s);var u=[[]];angular.copy(c,u);for(var r=0;r<d.length;r++)""!==d[r]&&(u=f(u,d[r],g[r],j));if(p(u,s,j))throw new Error(t.INCOMPLETE_MOVE)}var v=0,w=0;w="W"===j?1:26;for(var r=0;15>r;r++)c[w][r]===j&&v++;if(v>0){for(var x=0,y=0,r=0;r<d.length;r++)d[r]===w?x++:y++;if(v>x&&y>0)throw new Error(t.ILLEGAL_MOVE)}for(var r=0;r<g.length;r++){if("W"===j&&27===g[r]&&!q(c,j))throw new Error(t.ILLEGAL_MOVE);if("B"===j&&0===g[r]&&!q(c,j))throw new Error(t.ILLEGAL_MOVE)}for(var r=0;r<g.length;r++)if(l(c,g[r])===o)throw new Error(t.ILLEGAL_MOVE);for(var z=0,r=0;r<d.length;r++)""!==d[r]&&z++;if(2===i.length&&1===z){if("W"===j&&"B"===l(c,d[0]+i[0])&&"B"===l(c,d[0]+i[1]))throw new Error(t.ILLEGAL_DELTA);if("B"===j&&"W"===l(c,d[0]-i[0])&&"W"===l(c,d[0]-i[1]))throw new Error(t.ILLEGAL_DELTA)}else if(4===i.length)for(var r=0;z>=r;r++)if("W"===j){for(var A=d[r];A<=g[r];A+=i[0])if("B"===l(c,A))throw new Error(t.ILLEGAL_MOVE)}else for(var A=d[r];A>=g[r];A-=i[0])if("W"===l(c,A))throw new Error(t.ILLEGAL_MOVE);for(var s=i,r=0;r<d.length;r++)""!==d[r]&&0!==g[r]&&27!==g[r]&&(s=n(d[r],g[r],s));for(var r=0;r<d.length;r++)if(0===g[r]||27===g[r]){var B=Math.abs(d[r]-g[r]);if(0===s.length)throw new Error(t.ILLEGAL_DELTA);s.sort(function(a,b){return b-a});for(var C=0,A=s.length;A>=0;A--)if(C+s[A]>=B){s.splice(A,s.length-(A+1)),C=0;break}}for(var D=c,r=0;r<d.length;r++)""!==d[r]&&(D=f(D,d[r],g[r],j));var E;E=e(j,c)?{endMatch:{endMatchScores:"W"===j?[1,0]:"B"===j?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-b}};var F=[E,{set:{key:"board",value:D}},{set:{key:"fromDelta",value:{fromDelta:d}}},{set:{key:"toDelta",value:{toDelta:g}}},{setRandomInteger:{key:"dice1",from:1,to:7}},{setRandomInteger:{key:"dice2",from:1,to:7}}];return F}function e(a,b){for(var c=0,d=i(a),e=0;e<b[d].length;e++)b[d][e]===a&&c++;return 15===c}function f(a,b,c,d){for(var e=14;e>=0;e--)if(a[b][e]===d){a[b][e]="";break}if(a[c][0]===g(d)){a[c][0]=d;var f=h(g(d)),i=j(a,f);return a[f][i]=g(d),a}var i=j(a,c);return a[c][i]=d,a}function g(a){return"W"===a?"B":"W"}function h(a){return"W"===a?1:26}function i(a){return"W"===a?27:0}function j(a,b){for(var c=0;c<a[b].length;c++)if(""===a[b][c])return c}function k(a){return a[0]===a[1]?[a[0],a[0],a[0],a[0]]:a}function l(a,b){var c,d=0;if(b>25||2>b)return void 0;for(var e=0;15>e;e++)if(""!==a[b][e]&&(d++,c=a[b][e],d>=2))return c;return""}function m(a,b,c){for(var d=0,e=0;e<c.length;e++)""!==c[e]&&(d+=c[e]);for(var f=0,e=0;e<b.length;e++)""!==b[e]&&(f+=Math.abs(b-a));if(f>d)for(var e=0;b.length;e++)if(0===b[e]||27===b[e])return!0;return d===f}function n(a,b,c){for(var d=[],e=0;e<a.length;e++)""!==a[e]&&d.push(Math.abs(a[e]-b[e]));for(var f=!0,e=0;e<c.length-1;e++)if(c[e]!==c[e+1]){f=!1;break}if(f)for(var g=0,e=0;e<d.length;e++){g+=d[e];var h=c.length;if(h>0&&g%c[0]===0){var i=g/c[0];h>=i&&(console.log("number of elements to remove"),console.log(i),c.splice(0,i),g=0)}}else for(var j=0,e=0;e<d.length;e++)for(var k=c.length-1;k>=0;k--){j=0;for(var l=k;l>=0;l--)j+=c[l],j===d[e]&&c.splice(l,k+1)}return c}function o(a,b,c){var d;d=Math.abs(a-b);for(var e=0,f=c.length-1;f>=0;f--){e=0;for(var g=f;g>=0;g--)e+=c[g],e===d&&c.splice(g,f+1)}return c}function p(a,b,c){for(var d=!1,e=0;e<b.length;e++)if(void 0!==b[e]){d=!0;break}if(!d)return!1;if("W"===c&&"W"===a[1][0]){for(var e=0;e<b.length;e++)if("B"!==l(a,b[e]+1))return!0;return!1}if("B"===c&&"B"===a[26][0]){for(var e=0;e<b.length;e++)if("W"!==l(a,26-b[e]))return!0;return!1}if("W"===c&&q(a,c))for(var e=0;e<b.length;e++)for(var f=19;25>=f;f++)if("W"===a[f][0]&&f+b[e]>25)return!0;if("B"===c&&q(a,c))for(var e=0;e<b.length;e++)for(var f=2;7>=f;f++)if("B"===a[f][0]&&f-b[e]<2)return!0;if("W"===c)for(var e=1;25>=e;e++)for(var f=0;f<b.length;f++)if("W"===a[e][0]&&"B"!==l(a,e+b[f])&&void 0!==l(a,e+b[f]))return!0;if("B"===c)for(var e=25;e>=2;e--)for(var f=0;f<b.length;f++)if("B"===a[e][0]&&"W"!==l(a,e-b[f])&&void 0!==l(a,e-b[f]))return!0;return!1}function q(a,b){var c=0;if("W"===b)for(var d=1;26>d;d++)for(var e=0;15>=e;e++)if("W"===a[d][e]){if(20>d)return!1;c++}if("B"===b)for(var d=27;d>=2;d--)for(var e=0;15>e;e++)if("B"===a[d][e]){if(d>7)return!1;c++}return c>0?!0:void 0}function r(a,b,c){var d=[],e=[],g=[[]],h=[[]];if(angular.copy(a,g),angular.copy(b,d),0===b.length||!p(a,b,c))return!1;for(var i=[],j=0;j<d.length;j++)for(var k=d[j],l=1;26>=l;l++){var m=l,n=s(g,c,k,m),o={from:[m],to:[n]};if(2===o.from[0]);if(n!==!1){angular.copy(d,e),e.splice(j,1),angular.copy(g,h),h=f(h,m,n,c);var q=r(h,e,c);if(q!==!1&&void 0!==q&&q!==[])for(var t=0;t<q.length;t++){var u=[];angular.copy(o,u);for(var v=0;v<q[t].from.length;v++){var w=q[t].from[v],x=q[t].to[v];u.from.push(w),u.to.push(x),i.push(u)}}else i.push(o)}}return i}function s(a,b,c,d){var e=[c];if(!p(a,e,b))return!1;var f=1;f="W"===b?1:26;for(var h=0;15>h;h++)if(a[f][h]===b&&d!==f)return!1;for(var i=!1,h=0;15>h;h++)a[d][h]===b&&(i=!0);if(i===!1)return i;var j=!1;return"W"===b&&(l(a,c+d)!==g(b)&&25>=c+d?j=c+d:c+d>25&&q(a,b)&&(j=27)),"B"===b&&(l(a,d-c)!==g(b)&&d-c>=2?j=d-c:2>d-c&&q(a,b)&&(console.log("Can exit reached"),j=0)),j}var t,t={ILLEGAL_MOVE:"ILLEGAL_MOVE",ILLEGAL_DELTA:"ILLEGAL_DELTA",INCOMPLETE_MOVE:"INCOMPLETE_MOVE",NO_PLAYER:"NO_PLAYER"};return{isMoveOk:b,createMove:d,getInitialBoard:a,totalMoves:k,hasUsedFullRoll:m,getUnusedRolls:n,heldBy:l,getPossibleMoves:r,hasLegalMove:p,makeMove:f}})}(),function(){"use strict";function a(a){var b=a.changedTouches[0];e(a,a.type,b.clientX,b.clientY)}function b(a){f=!0,e(a,"touchstart",a.clientX,a.clientY)}function c(a){f&&e(a,"touchmove",a.clientX,a.clientY)}function d(a){f=!1,e(a,"touchend",a.clientX,a.clientY)}function e(a,b,c,d){a.preventDefault(),handleDragEvent(a,b,c,d)}var f=!1;document.addEventListener("touchstart",a,!0),document.addEventListener("touchmove",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("touchcancel",a,!0),document.addEventListener("touchleave",a,!0),document.addEventListener("mousedown",b,!0),document.addEventListener("mousemove",c,!0),document.addEventListener("mouseup",d,!0)}(),angular.module("myApp").controller("Ctrl",["$scope","$animate","$element","$log","$timeout","aiService","gameService","stateService","backGammonLogicService","resizeGameAreaService","$translate",function(a,b,c,d,e,f,g,h,i,j,k){function l(){for(var c=a.fromDelta[a.fromDelta.length-1],d=(a.toDelta[a.toDelta.length-1],a.board[c][0]),e=-1,f=14;f>=0;f--)if(a.board[c][f]===d){e=f;break}var g=document.getElementById("e2e_test_piece_"+d+"_"+c+"_"+e);b.addClass(g,"slowlyDisapear")}function m(b){if(null===b.stateBeforeMove&&2===a.counter&&(a.counter=0),0===a.counter)return a.counter=1,a.fromDelta=[],a.toDelta=[],void(a.board=a.initialBoard);if(1===a.counter)return a.counter=2,void v();a.board=b.stateAfterMove.board,a.fromDelta=[],a.toDelta=[],a.dice=[b.stateAfterMove.dice1,b.stateAfterMove.dice2],a.dice1=b.stateAfterMove.dice1,a.dice2=b.stateAfterMove.dice2,a.turnIndex=b.turnIndexAfterMove;var c=[];angular.copy(a.dice,c),c=i.totalMoves(c),a.fullDiceArray=c;var d=[[]];if(angular.copy(a.board,d),a.originalBoard=d,0===a.turnIndex)var e="W";else var e="B";a.possibleMoves=i.getPossibleMoves(a.board,a.fullDiceArray,e),("playAgainstTheComputer"===b.playMode&&1===a.turnIndex||"aisOnly"===b.playMode)&&n()}function n(){var b=!0;if(0===a.turnIndex)var c="W";else var c="B";var e=[[]],h=[];angular.copy(a.board,e),angular.copy(a.fullDiceArray,h);var i=f.createComputerMove(e,h,c,a.possibleMoves);try{if(i===[]||void 0===i){b=!1;var j;j="W"===c?1:0;var k={setTurn:{turnIndex:j}},i=[k,{set:{key:"board",value:a.board}},{set:{key:"fromDelta",value:{fromDelta:a.fromDelta}}},{set:{key:"toDelta",value:{toDelta:a.toDelta}}},{setRandomInteger:{key:"dice1",from:1,to:7}},{setRandomInteger:{key:"dice2",from:1,to:7}}];g.makeMove(i)}else for(var l=0;l<i.from.length;l++)o(i.from[l],2e3*l),p(i.to[l],1e3+2e3*l)}catch(m){d.info("Illegal Move"),console.log(m)}}function o(b,c){e(function(){a.clickPiece(b)},c)}function p(b,c){e(function(){a.clickSpace(b)},c)}function q(a){return a.indexOf("piece")>-1?!0:!1}function r(a){return a.indexOf("space")>-1?!0:!1}function s(a){var b=a.split("_");return q(a)?parseInt(b[4]):r(a)?parseInt(b[3]):!1}function t(){if(a.toDelta.length!==a.fromDelta.length&&a.toDelta.length!==a.fromDelta.length-1)throw new Error("Invariant broken: fromDelta="+a.fromDelta+" toDelta="+a.toDelta)}function u(b){switch(b){case 1:return"d1.gif";case 2:return"d2.gif";case 3:return"d3.gif";case 4:return"d4.gif";case 5:return"d5.gif";case 6:return"d6.gif";default:return console.log("error dice out of range:"+a.dice1),""}}function v(){g.makeMove([{set:{key:"board",value:[["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","B","B","B","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","B","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","W","W","","","","","","","","","",""],["B","B","B","B","B","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","W","W","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""]]}},{set:{key:"fromDelta",value:{fromDelta:[]}}},{set:{key:"toDelta",value:{toDelta:[]}}},{setTurn:{turnIndex:0}},{setRandomInteger:{key:"dice1",from:1,to:7}},{setRandomInteger:{key:"dice2",from:1,to:7}}])}j.setWidthToHeight(1),console.log("Translation of 'RULES_OF_TICTACTOE' is "+k("RULES_OF_BACKGAMMON")),a.counter=0,a.initialBoard=[["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","B","B","B","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","B","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","W","W","","","","","","","","","",""],["B","B","B","B","B","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["W","W","W","W","W","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["B","B","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""]],a.shouldSlowlyAppear=function(b,c){if(0===a.fromDelta.length||0===a.toDelta.length)return!1;for(var d=a.fromDelta[a.fromDelta.length-1],e=a.toDelta[a.toDelta.length-1],f=a.board[d][0],g=-1,h=14;h>=0;h--)if(a.board[e][h]===f){g=h;break}return e===b&&c===g?!0:!1},window.e2e_test_statexService=h,window.handleDragEvent=function(b,c){var d=b.target.id;"touchstart"===c&&q(d)?a.clickPiece(s(d)):"touchend"===c&&r(d)&&a.clickSpace(s(d))},a.clickPiece=function(b){if(t(),4===a.fullDiceArray.length);return 0===a.turnIndex&&"W"!==a.board[b][0]?(d.info("White turn, clicked on black player"),void a.$apply()):1===a.turnIndex&&"B"!==a.board[b][0]?(d.info("Black turn, clicked on white player"),void a.$apply()):a.fromDelta.length===a.toDelta.length?(a.fromDelta.push(b),void a.$apply()):a.fromDelta.length!==a.toDelta.length?(a.fromDelta[a.fromDelta.length-1]=b,void a.$apply()):(a.$apply(),void t())},a.clickSpace=function(b){if(t(),console.log("Space Clicked: "+b),a.toDelta.length===a.fromDelta.length)return void console.log("Must select a piece to move first");var c,f;if(0===a.turnIndex?(c="W",f="B"):(c="B",f="W"),0===a.turnIndex&&"W"!==a.board[a.fromDelta[a.fromDelta.length-1]][0])d.info("Not white's turn");else if(1===a.turnIndex&&"B"!==a.board[a.fromDelta[a.fromDelta.length-1]][0])d.info("Not blacks turn");else{for(var h=i.getPossibleMoves(a.board,a.fullDiceArray,c),j=!1,k=0;k<h.length;k++)h[k].from[0]===a.fromDelta[a.fromDelta.length-1]&&h[k].to[0]===b&&(j=!0);for(var k=0;k<h.length;k++)for(var m=a.fromDelta[a.fromDelta.length-1],n=b,o=Math.abs(m-n),p=0,q=0;q<h[k].from.length;q++)if(p+=Math.abs(h[k].from[q]-h[k].to[q]),p===o&&h[k].from[0]===m&&h[k].to[q]===n){j=!0;break}if(j){a.toDelta.push(b),l();var r=500;e(function(){if(i.makeMove(a.board,a.fromDelta[a.fromDelta.length-1],b,c),angular.copy(a.dice,a.fullDiceArray),a.fullDiceArray=i.totalMoves(a.fullDiceArray),i.getUnusedRolls(a.fromDelta,a.toDelta,a.fullDiceArray),!i.hasLegalMove(a.board,a.fullDiceArray,c))try{var e=i.createMove(a.turnIndex,a.originalBoard,a.fromDelta,a.toDelta,a.dice);console.log("move being made"),g.makeMove(e)}catch(f){d.info("Illegal Move"),console.log(f)}},r)}else{if(h!==!1)return void console.log("Get possible move malfunction");if(!i.hasLegalMove(a.board,a.fullDiceArray,c))try{if(a.fromDelta.pop(),a.fromDelta.length>0)var s=i.createMove(a.turnIndex,a.originalBoard,a.fromDelta,a.toDelta,a.dice);else{var u;u="W"===c?1:0;var v={setTurn:{turnIndex:u}},s=[v,{set:{key:"board",value:a.board}},{set:{key:"fromDelta",value:{fromDelta:a.fromDelta}}},{set:{key:"toDelta",value:{toDelta:a.toDelta}}},{setRandomInteger:{key:"dice1",from:1,to:7}},{setRandomInteger:{key:"dice2",from:1,to:7}}]}console.log("move being made"),g.makeMove(s)}catch(w){d.info("Illegal Move"),console.log(w)}}}a.$apply()},a.completeMove=function(){try{var b=i.createMove(a.turnIndex,a.board,a.fromDelta,a.toDelta,a.dice);g.makeMove(b)}catch(c){d.info("Illegal move")}},a.rollDice=function(){a.dice1=Math.floor(6*Math.random())+1,a.dice2=Math.floor(6*Math.random())+1;var b=[a.dice1,a.dice2];return a.dice=b,b},a.getImageSource=function(b,c){void 0===a.board&&(a.board=initialBoard);var d=a.board[b][c],e=-1,f={imgSource:"",isBlackMan:!1,isWhiteMan:!1,isSelected:!1},g=!1;if((void 0===a.fromDelta||null===a.fromDelta||0===a.fromDelta.length)&&(g=!0),!g&&a.fromDelta.length>a.toDelta.length&&a.fromDelta[a.fromDelta.length-1]===b)for(var h=14;h>=0;h--)if(""!==a.board[b][h]){e=h;break}return"W"===d?e===c?(f.imgSource="white_man_selected.png",f.isWhiteMan=!0,f.isSelected=!0,f):(f.imgSource="white_man.png",f.isWhiteMan=!0,f):"B"===d?e===c?(f.imgSource="black_man_selected.png",f.isBlackMan=!0,f.isSelected=!0,f):(f.imgSource="black_man.png",f.isBlackMan=!0,f):f},a.getRowPosition=function(a){if(1===a||26===a)return"46%";if(a>=2&&7>=a){var b=9+6*(a-2);return b+"%"}if(a>=8&&13>=a){var b=18.5+6*(a-2);return b+"%"}if(a>=14&&19>=a){var b=85-6*(a-14);return b+"%"}if(a>=20&&25>=a){var b=39-6*(a-20);return b+"%"}return"0%"},a.getColumnPositon=function(a,b){if(a>=1&&13>=a){var c=6+4*b;return c+"%"}if(a>=14&&26>=a){var c=87-4*b;return c+"%"}return"0%"},a.getBoardPosition=function(a,b){var c=getColumnPositon(b),d=getRowPosition(a);return void 0===c||void 0===d?"":"{position:absolute; top:"+c+"%; right:"+d+"%; width:7%; height:7%}"},a.shouldShowImage=function(b,c){if(0===b||27===b)return!1;var d=a.board[b][c];return""!==d},a.getDice1=function(){return u(a.dice1)},a.getDice2=function(){return u(a.dice2)},a.pieceColor=function(b,c){return a.board[b][c]},g.setGame({gameDeveloperEmail:"ibtawfik@gmail.com",minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:i.isMoveOk,updateUI:m})}]),angular.module("myApp").factory("aiService",["backGammonLogicService",function(a){"use strict";function b(b,d,e,f){for(var g=(new Date).getTime(),h=-1,i=0,j=0;j<f.length;j++){var k=[[]];angular.copy(b,k);for(var l=0;l<f[j].from.length;l++)k=a.makeMove(k,f[j].from[l],f[j].to[l],e);var m=c(e,k);m>h&&(h=m,i=j)}var n=(new Date).getTime();return console.log(n-g),f[i]}function c(a,b){return"W"===a?d(b):e(b)}function d(a){for(var b=0,c=2;27>=c;c++)for(var d=0;14>=d;d++){var e=c-1;c>=2&&21>c&&"W"===a[c][d]&&(b+=0===d?.5*e:.75*e),c>=19&&25>=c&&"W"===a[c][d]&&(b+=0===d?17+.01*e:18+.01*e),26===c&&"B"===a[c][d]&&(b+=20),27===c&&14!==d&&"W"===a[c][d]&&(b+=30),27===c&&14===d&&"W"===a[c][d]&&(b+=1e9)}return b}function e(a){for(var b=0,c=[27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0],d=0;25>=d;d++)for(var e=0;14>=e;e++){var f=c[d]-1;d>=8&&26>d&&"B"===a[d][e]&&(b+=0===e?.5*f:.75*f),7>=d&&d>1&&"B"===a[d][e]&&(b+=0===e?17+.01*f:18+.01*f),1===d&&"W"===a[d][e]&&(b+=20),0===d&&14!==e&&"B"===a[d][e]&&(b+=30),0===d&&14===e&&"B"===a[d][e]&&(b+=1e9)}return b}return{createComputerMove:b}}]);
//# sourceMappingURL=everything.min.js.map